<!DOCTYPE html>


<html lang="ja" data-theme="">
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>競プロ関連、C&#43;&#43;のちょっとしたこと - coindarw&rsquo;s page</title>

<meta name="description" content="競技プログラミングに関係したC&#43;&#43;関連のTips的なものまとめ。あくまで競プロ用なので、業務ではもっと別の方法を取ったほうがよかったりすると思う。
環境としてはWindows, WSL or MinGWでGCCを使うことを想定しているが、所々MinGWでは動かないところもあるので注意。検証していないがLinuxならたぶん大丈夫だと思う。clangはほぼ使ったことがないので不明。">





<link rel="icon" type="image/x-icon" href="https://coindarw.github.io/blog/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="https://coindarw.github.io/blog/favicon.png">




    



<style>
  body {
    visibility: hidden;
    opacity: 0;
  }
</style>

<noscript>
  <style>
    body {
      visibility: visible;
      opacity: 1;
    }
  </style>
</noscript>




    





    
    
        
    
    

    
        <link rel="stylesheet" href="https://coindarw.github.io/blog/css/style.min.b41678090f18e6995008e11690edb538aed720df0e4e244d559aac33c1e7b4ff.css" integrity="sha256-tBZ4CQ8Y5plQCOEWkO21OK7XIN8OTiRNVZqsM8HntP8=">
    





    

    





    
    
        
    
    

    
        <script src="https://coindarw.github.io/blog/js/script.min.74bf1a3fcf1af396efa4acf3e660e876b61a2153ab9cbe1893ac24ea6d4f94ee.js" type="text/javascript" charset="utf-8" integrity="sha256-dL8aP88a85bvpKzz5mDodrYaIVOrnL4Yk6wk6m1PlO4="></script>
    







<meta property="og:url" content="https://coindarw.github.io/blog/posts/cp-cpp-tips/">
  <meta property="og:site_name" content="coindarw&#39;s page">
  <meta property="og:title" content="競プロ関連、C&#43;&#43;のちょっとしたこと">
  <meta property="og:description" content="競技プログラミングに関係したC&#43;&#43;関連のTips的なものまとめ。あくまで競プロ用なので、業務ではもっと別の方法を取ったほうがよかったりすると思う。
環境としてはWindows, WSL or MinGWでGCCを使うことを想定しているが、所々MinGWでは動かないところもあるので注意。検証していないがLinuxならたぶん大丈夫だと思う。clangはほぼ使ったことがないので不明。">
  <meta property="og:locale" content="ja">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-11-05T01:39:58+09:00">
    <meta property="article:modified_time" content="2023-11-05T01:39:58+09:00">
    <meta property="article:tag" content="C&#43;&#43;">
    <meta property="article:tag" content="競技プログラミング">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="競プロ関連、C&#43;&#43;のちょっとしたこと">
  <meta name="twitter:description" content="競技プログラミングに関係したC&#43;&#43;関連のTips的なものまとめ。あくまで競プロ用なので、業務ではもっと別の方法を取ったほうがよかったりすると思う。
環境としてはWindows, WSL or MinGWでGCCを使うことを想定しているが、所々MinGWでは動かないところもあるので注意。検証していないがLinuxならたぶん大丈夫だと思う。clangはほぼ使ったことがないので不明。">













    
</head>
<body>
    <a class="skip-main" href="#main"></a>
    <div class="container">
        <header class="common-header"> 
            
                <div class="header-top">
    <h1 class="site-title">
    <a href="/blog">coindarw&#39;s page</a>
</h1>
    <ul class="social-icons">


    
        <li>
            <a href="https://github.com/coindarw" title="Github" rel="me">
            <span class="inline-svg" >




    
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

</span>

            </a>
        </li>
    



    <li>
            <a href="https://coindarw.github.io/blog/index.xml" title="RSS" rel="me">
            <span class="inline-svg" >




    
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg>

</span>

            </a>
        </li>
    

</ul>
</div>

    <nav>
        
        
        <a class="" href="https://coindarw.github.io/blog/about/" title="">About</a>
        
        <a class="" href="https://coindarw.github.io/blog/tags/" title="">Tags</a>
        
        <a class="" href="https://coindarw.github.io/blog/posts/" title="">Archive</a>
        
    </nav>


<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$','$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
  };

  window.addEventListener('load', (event) => {
      document.querySelectorAll("mjx-container").forEach(function(x){
        x.parentElement.classList += 'has-jax'})
    });

</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>



            
        </header>
        <main id="main" tabindex="-1"> 
            
    

    <article class="post h-entry">
        <div class="post-header">
            <header>
                <h1 class="p-name post-title">競プロ関連、C++のちょっとしたこと</h1>

                
            </header>
        </div>
        




<nav id="TableOfContents">
  <ul>
    <li><a href="#未定義動作の検出">未定義動作の検出</a>
      <ul>
        <li><a href="#fsanitizeundefined">fsanitize=undefined</a></li>
        <li><a href="#fsanitizeaddress">fsanitize=address</a></li>
        <li><a href="#d_glibcxx_debug">D_GLIBCXX_DEBUG</a></li>
      </ul>
    </li>
    <li><a href="#デバッガgdbの使用によるスタックトレースの表示">デバッガ(gdb)の使用によるスタックトレースの表示</a>
      <ul>
        <li><a href="#手順">手順</a></li>
      </ul>
    </li>
    <li><a href="#デバッグ出力">デバッグ出力</a>
      <ul>
        <li><a href="#デバッグ用マクロ">デバッグ用マクロ</a></li>
      </ul>
    </li>
    <li><a href="#bitsstdchのプリコンパイル">bits/stdc++.hのプリコンパイル</a>
      <ul>
        <li><a href="#手順-1">手順</a></li>
        <li><a href="#確認方法">確認方法</a></li>
      </ul>
    </li>
    <li><a href="#エイリアス">エイリアス</a></li>
    <li><a href="#その他便利なオプションなど">その他便利なオプションなど</a>
      <ul>
        <li><a href="#コンパイルオプションpragmaなど">コンパイルオプション・pragmaなど</a></li>
        <li><a href="#便利な文法関数">便利な文法・関数</a></li>
        <li><a href="#作っておくと便利な関数など">作っておくと便利な関数など</a></li>
        <li><a href="#さらに些末なこと">さらに些末なこと</a></li>
      </ul>
    </li>
    <li><a href="#参考">参考</a></li>
    <li><a href="#上で言及していないが便利なリンク集">上で言及していないが便利なリンク集</a></li>
  </ul>
</nav>

        <div class="content e-content">
            <p>競技プログラミングに関係したC++関連のTips的なものまとめ。あくまで競プロ用なので、業務ではもっと別の方法を取ったほうがよかったりすると思う。</p>
<p>環境としてはWindows, WSL or MinGWでGCCを使うことを想定しているが、所々MinGWでは動かないところもあるので注意。検証していないがLinuxならたぶん大丈夫だと思う。clangはほぼ使ったことがないので不明。</p>
<h2 id="未定義動作の検出" >未定義動作の検出
<span>
    <a href="#%e6%9c%aa%e5%ae%9a%e7%be%a9%e5%8b%95%e4%bd%9c%e3%81%ae%e6%a4%9c%e5%87%ba">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>配列範囲外参照、0除算など、未定義動作をコードに仕込んでしまうと、手元環境では正しい答えを出すのに提出するとWA/REが出るといったことが起きる。</p>
<p>このような場合の簡単な対処法をこの項と次項「デバッガの使用によるスタックトレースの表示」に書いていく</p>
<p>以下のようなコンパイルオプションを指定することでかなり多くの未定義動作を検出することができる。</p>
<p>（WindowsでMinGWを使っている場合は <code>fsanitize</code> が使えないので注意。WSLを使うといい）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>g++ -fsanitize<span style="color:#f92672">=</span>undefined,address -D_GLIBCXX_DEBUG 
</span></span></code></pre></div><p>かなり多くのオプションがあるが、とりあえず3つだけ書く。</p>
<p>これ以外にもメモリリークを検知する <code>LeakSanitizer</code> とかいろいろあるので調べると面白そう</p>
<p><a href="https://gcc.gnu.org/onlinedocs/gcc/Instrumentation-Options.html#index-fsanitize_003daddress">https://gcc.gnu.org/onlinedocs/gcc/Instrumentation-Options.html#index-fsanitize_003daddress</a></p>
<h3 id="fsanitizeundefined" >fsanitize=undefined
<span>
    <a href="#fsanitizeundefined">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><p>WindowsのMinGWでは動かないので注意。WSLなら大丈夫。<a href="https://stackoverflow.com/questions/67619314/cannot-use-fsanitize-address-in-mingw-compiler">clangでもいける</a>っぽい？</p>
<p>未定義動作サニタイザ</p>
<ul>
<li>ゼロ除算</li>
<li>オーバーフロー</li>
<li>範囲外のシフト操作</li>
</ul>
<p>などを検出してくれる</p>
<h3 id="fsanitizeaddress" >fsanitize=address
<span>
    <a href="#fsanitizeaddress">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><p>これもMinGWでは動かない</p>
<p>不正なメモリ操作を検知してくれる</p>
<p>生配列・vectorへの <code>[]</code> アクセスの範囲外参照やスタックオーバーフローなど</p>
<h3 id="d_glibcxx_debug" >D_GLIBCXX_DEBUG
<span>
    <a href="#d_glibcxx_debug">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><p>これはMinGWでも使える。</p>
<p>これを付けておくと、_GLIBCXX_DEBUGマクロが定義されて標準ライブラリがデバッグ用のものに置き換わる。</p>
<p>具体例としては、 <code>vector</code> で <code>[]</code> アクセスする際に境界チェックが行われる、 <code>lower_bound</code> を実行した際に配列などの中身の順番がおかしくなっていない（<a href="https://cpprefjp.github.io/reference/algorithm.html#sequence-is-partitioned">partitionedである</a>）かチェックするなど。</p>
<p>注意：なお、これを付けるとエラー検知のために計算量も変わることがあるので、提出コードに <code>#define _GLIBCXX_DEBUG</code> などとするとTLEしてしまったりする</p>
<p>余談：lower_boundの要件がソート済みであることではなく、区分化されている（sequence is partitioned）ことにC++11から変わっているの知らなかった</p>
<h2 id="デバッガgdbの使用によるスタックトレースの表示" >デバッガ(gdb)の使用によるスタックトレースの表示
<span>
    <a href="#%e3%83%87%e3%83%90%e3%83%83%e3%82%acgdb%e3%81%ae%e4%bd%bf%e7%94%a8%e3%81%ab%e3%82%88%e3%82%8b%e3%82%b9%e3%82%bf%e3%83%83%e3%82%af%e3%83%88%e3%83%ac%e3%83%bc%e3%82%b9%e3%81%ae%e8%a1%a8%e7%a4%ba">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>注意：以降の手順で、WSL1を使用している場合、正しくスタックトレースが表示できない場合がある。（ <code>#0  0x0000000000000000 in ?? ()</code> などと出てくる）    <code>wsl -l -v</code> を実行し、VERSIONの欄が1となっている場合はWSL2にアップデートしておくこと。</p>
<p>様々な機能があるのだが、とりあえず競プロ中に一番欲しくなるであろう機能として、スタックトレースを表示する方法を書く。</p>
<p>何行目のどの関数の中でエラーが起きたのか確認することができる</p>
<p>gdbを使うのではなく、環境変数 <code>UBSAN_OPTIONS</code> に <code>print_stacktrace=1</code> などと指定してもよさそう</p>
<p>また、この項ではコマンドラインでの操作を前提としているが、学生であればGithub Educationに登録することで統合開発環境のClionが無料で使える。GUIでデバッグできるのでこれを使ってもいいと思う</p>
<h3 id="手順" >手順
<span>
    <a href="#%e6%89%8b%e9%a0%86">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><p>以下の提出のデバッグを行いたいとする。　TODO リンク追加</p>
<ol>
<li>コンパイルする際、オプションとして <code>-g</code> を付けて実行ファイルにデバッグ用の情報が入るようにする。
<ol>
<li>この際、前項のデバッグ用のオプションも併用するとよい。</li>
<li>また、 <code>-O0</code> で最適化を切っておく</li>
<li>長くなるのでエイリアスしておくとよい</li>
</ol>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>g++ -fsanitize<span style="color:#f92672">=</span>undefined,address -D_GLIBCXX_DEBUG main.cpp -g -O0
</span></span></code></pre></div><ol start="2">
<li>gdbを実行（この時点では <code>a.out</code> は実行されない）</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gdb a.out
</span></span></code></pre></div><ol start="3">
<li>gdbの操作画面になるので、 <code>run</code> でプログラムを実行する
<ol>
<li>この時自分で入力を打ち込んだり、コピペしたりしてもいいのだが、入力途中でプログラムが終了するとそれ以降の入力が入ってしまって不便。入力ファイルを作って <code>&lt; in.txt</code> のようにリダイレクトで渡すのが良いと思う</li>
</ol>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>run &lt; in.txt
</span></span></code></pre></div><ol start="4">
<li>途中で落ちた場合、 <code>bt</code> でトレースを表示する。（Backtraceの略らしい）
<ol>
<li>なお、深い再帰の中でエラーが起きた場合などはとんでもない長さになる。 <code>bt 10</code> のように最大でいくつ表示するか指定できる</li>
<li><code>bt 10</code> だと奥から10個、 <code>bt -10</code> だと手前（例えばmainは普通手前側）から10個表示される</li>
</ol>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bt
</span></span></code></pre></div><ol start="5">
<li>終了する際は <code>q</code> を入力する。 <code>Quit anyway? (y or n)</code> と聞かれるのでyを入力すると終了できる</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>q
</span></span></code></pre></div><h2 id="デバッグ出力" >デバッグ出力
<span>
    <a href="#%e3%83%87%e3%83%90%e3%83%83%e3%82%b0%e5%87%ba%e5%8a%9b">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>まず、標準エラー出力をデバッグ用出力として使用することがよく行われる</p>
<p>C++であれば以下のようにすることで、答えには影響を与えないで変数aの中身を出力することができる。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>cerr <span style="color:#f92672">&lt;&lt;</span> a <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span></code></pre></div><p>しかし、以下のような欠点もあるため、少し工夫したデバッグ用マクロを作ることも多い</p>
<ul>
<li>出力自体に時間がかかるため、ループ内で出力などしてしまうとTLEになってしまうことがある</li>
<li>ジャッジによっては標準エラー出力で余計なアウトプットをしてしまうと正解扱いにならない</li>
</ul>
<h3 id="デバッグ用マクロ" >デバッグ用マクロ
<span>
    <a href="#%e3%83%87%e3%83%90%e3%83%83%e3%82%b0%e7%94%a8%e3%83%9e%e3%82%af%e3%83%ad">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><p>C++では <code>#ifdef</code> のようなプリプロセッサ命令を使うことで、環境ごとにコードを変えることができる。</p>
<p>多くのジャッジ（AtCoder, Codeforces, yukicoderなど）ではC/C++のコンパイルコマンドに <code>-DONLINE_JUDGE</code> というオプションがついており、ONLINE_JUDGEというマクロが存在する扱いになっている。</p>
<p>もしくはジャッジ側ではなく、ローカル環境の方でコンパイルする際に <code>-DLOCAL</code> オプションなどを付けて特別扱いする場合もある。別PCを使用する際にエイリアス設定をする必要があるなど手間は多少あるが、どのオンラインジャッジでも使えることが利点。</p>
<p>例えば以下のようなコードを書けば、手元の環境では <code>debug(a)</code> と書くとaの値を出力してくれるが、提出した場合は実行に一切影響しない（余計な実行時間もかからない）デバッグ用マクロを定義することができる。</p>
<p>実際には、複数変数の出力などに対応させるため、もう少し複雑なコードにしている人が多いと思う</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#ifdef ONLINE_JUDGE
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#define debug(x)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#else
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#define debug(x) cerr &lt;&lt; x &lt;&lt; endl;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#endif
</span></span></span></code></pre></div><p><del>私のデバッグ用マクロは特定のコンテナを入れると壊れたりするのでここには載せません。</del></p>
<p>「競プロ　デバッグ　マクロ」とかで検索すると強い人のテンプレがいろいろ出てくる。</p>
<h2 id="bitsstdchのプリコンパイル" >bits/stdc++.hのプリコンパイル
<span>
    <a href="#bitsstdch%e3%81%ae%e3%83%97%e3%83%aa%e3%82%b3%e3%83%b3%e3%83%91%e3%82%a4%e3%83%ab">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>主要な標準ライブラリをまとめてincludeしてくれるbits/stdc++.hは便利だが、コンパイル時間が伸びてしまう。</p>
<p>bits/stdc++.hだけ事前にコンパイルしておき、コンパイル時にはこれを参照するようにしておくことでかなりコンパイル時間が短縮される。</p>
<p>なお、コンパイルオプションごとに別にプリコンパイルしておくことが必要。</p>
<p><code>#pragma</code> 命令の扱いがよくわかっていない．</p>
<p><code>#include</code> の後に <code>#pragma</code> があればプリコンパイルヘッダが使われるが、逆だと使われないなど条件がよくわからない</p>
<p>1回のコンパイルにつき、プリコンパイルヘッダは1つしか指定できないので、 <code>&lt;bits/stdc++.h&gt;</code> と <code>&lt;atcoder/all&gt;</code> の両方をプリコンパイルしておくといったことはできない</p>
<blockquote>
<p>• Only one precompiled header can be used in a particular compilation.</p>
</blockquote>
<p>私の場合はそれらをまとめた <code>&lt;mylibs/all.h&gt;</code> をプリコンパイルしておき、 <code>ONLINE_JUDGE</code> マクロの有無でどちらをインクルードするか分岐している。WSLで1.3秒くらいでコンパイルできる。</p>
<p>プリコンパイルヘッダーとしてコンパイル時に認識される条件などは割と複雑。ドキュメントの該当ページは短いので通して読んでおくのがよさそう</p>
<p><a href="https://gcc.gnu.org/onlinedocs/gcc/Precompiled-Headers.html">https://gcc.gnu.org/onlinedocs/gcc/Precompiled-Headers.html</a></p>
<p><code>.h.gch</code> ファイルの名前は基本何でもいいが，ディレクトリ名や拡張子を間違えると認識してくれないので注意</p>
<h3 id="手順-1" >手順
<span>
    <a href="#%e6%89%8b%e9%a0%86-1">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><p>Linux/WSLであればこんな感じ</p>
<p>（fatal error … Permission deniedなどと言われたら適宜 <code>sudo</code> を付けて実行）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># bits/stdc++.hの場所を調べる</span>
</span></span><span style="display:flex;"><span>echo -e <span style="color:#e6db74">&#34;#include&lt;bits/stdc++.h&gt;\n int main(){}&#34;</span> | g++ -xc++ - -M | grep <span style="color:#e6db74">&#34;bits/stdc++.h&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cd /usr/include/x86_64-linux-gnu/c++/11/bits <span style="color:#75715e"># 上のコマンドで得られた場所に適宜書き換え</span>
</span></span><span style="display:flex;"><span>mkdir stdc++.h.gch
</span></span><span style="display:flex;"><span>cd stdc++.h.gch
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 使うコンパイルコマンドごとにコンパイル</span>
</span></span><span style="display:flex;"><span>g++ stdc++.h -o stdc++.h.gch/stdc++.h.gch
</span></span><span style="display:flex;"><span>g++ stdc++.h -o stdc++.h.gch/stdc++_o2.h.gch -O2
</span></span><span style="display:flex;"><span>g++ stdc++.h -o stdc++.h.gch/stdc++_debug.h.gch -fsanitize<span style="color:#f92672">=</span>undefined,address -D_GLIBCXX_DEBUG -g -O0
</span></span></code></pre></div><p>Windowsであればこんな感じ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#75715e"># bits/stdc++.hの場所を調べる</span>
</span></span><span style="display:flex;"><span>echo  <span style="color:#e6db74">&#34;#include&lt;bits/stdc++.h&gt;</span><span style="color:#ae81ff">`n</span><span style="color:#e6db74">int main(){}&#34;</span> &gt; bb.cpp; g++ bb.cpp -M |  Select-String -SimpleMatch <span style="color:#e6db74">&#34;bits/stdc++&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 適宜得られたパスに書き換え、bitsディレクトリまで行く</span>
</span></span><span style="display:flex;"><span>cd C:/mingwのパス/lib/gcc/x86_64-w64-mingw32/<span style="color:#ae81ff">13.1</span>.<span style="color:#ae81ff">0</span>/include/c++/x86_64-w64-mingw32
</span></span><span style="display:flex;"><span>mkdir stdc++.h.gch
</span></span><span style="display:flex;"><span>cd stdc++.h.gch
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 使うコンパイルコマンドごとにコンパイル</span>
</span></span><span style="display:flex;"><span>g++ stdc++.h -o stdc++.h.gch/stdc++.h.gch
</span></span><span style="display:flex;"><span>g++ stdc++.h -o stdc++.h.gch/stdc++_o2.h.gch -O2
</span></span><span style="display:flex;"><span>g++ stdc++.h -o stdc++.h.gch/stdc++_debug.h.gch -D_GLIBCXX_DEBUG -g -O0
</span></span></code></pre></div><h3 id="確認方法" >確認方法
<span>
    <a href="#%e7%a2%ba%e8%aa%8d%e6%96%b9%e6%b3%95">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><p>（実際のところ、目に見えてコンパイル時間は縮むので基本的には設定できたことは感覚でわかるのだが、ファイル名など間違えているとうまくいかないので）</p>
<p>適当なファイルを作って、そこでプリコンパイルしたヘッダをインクルードする</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;bits/stdc++.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span> () {
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>-H</code> オプションを使うとインクルードしたヘッダを確認できる．例えば次のような出力が出て、現在の設定に合致するオプションでコンパイルしたファイルが勝手に選ばれることが確認できる。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ g++ main.cpp -H
</span></span><span style="display:flex;"><span>x /usr/include/x86_64-linux-gnu/c++/11/bits/stdc++.h.gch/stdc++_debug.h.gch
</span></span><span style="display:flex;"><span>x /usr/include/x86_64-linux-gnu/c++/11/bits/stdc++.h.gch/stdc++_o2_debug.h.gch
</span></span><span style="display:flex;"><span>x /usr/include/x86_64-linux-gnu/c++/11/bits/stdc++.h.gch/stdc++_o3.h.gch
</span></span><span style="display:flex;"><span>! /usr/include/x86_64-linux-gnu/c++/11/bits/stdc++.h.gch/stdc++.h.gch
</span></span><span style="display:flex;"><span> main.cpp
</span></span></code></pre></div><p>上手く設定できていないと、このように大量のファイルを読みに行ってしまう</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ g++ main.cpp -H
</span></span><span style="display:flex;"><span>. /usr/include/x86_64-linux-gnu/c++/11/bits/stdc++.h
</span></span><span style="display:flex;"><span>.. /usr/include/c++/11/cassert
</span></span><span style="display:flex;"><span>... /usr/include/x86_64-linux-gnu/c++/11/bits/c++config.h
</span></span><span style="display:flex;"><span>.... /usr/include/x86_64-linux-gnu/c++/11/bits/os_defines.h
</span></span><span style="display:flex;"><span>..... /usr/include/features.h
</span></span><span style="display:flex;"><span>...... /usr/include/features-time64.h
</span></span><span style="display:flex;"><span>....... /usr/include/x86_64-linux-gnu/bits/wordsize.h
</span></span><span style="display:flex;"><span>....... /usr/include/x86_64-linux-gnu/bits/timesize.h
</span></span><span style="display:flex;"><span>........ /usr/include/x86_64-linux-gnu/bits/wordsize.h
</span></span><span style="display:flex;"><span>...... /usr/include/x86_64-linux-gnu/sys/cdefs.h
</span></span><span style="display:flex;"><span>....... /usr/include/x86_64-linux-gnu/bits/wordsize.h
</span></span><span style="display:flex;"><span>....... /usr/include/x86_64-linux-gnu/bits/long-double.h
</span></span><span style="display:flex;"><span>...... /usr/include/x86_64-linux-gnu/gnu/stubs.h
</span></span><span style="display:flex;"><span>....... /usr/include/x86_64-linux-gnu/gnu/stubs-64.h
</span></span><span style="display:flex;"><span>.... /usr/include/x86_64-linux-gnu/c++/11/bits/cpu_defines.h
</span></span><span style="display:flex;"><span>.... /usr/include/c++/11/pstl/pstl_config.h
</span></span><span style="display:flex;"><span>... /usr/include/assert.h
</span></span><span style="display:flex;"><span>.. /usr/include/c++/11/cctype
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...以下大量に続く
</span></span></code></pre></div><h2 id="エイリアス" >エイリアス
<span>
    <a href="#%e3%82%a8%e3%82%a4%e3%83%aa%e3%82%a2%e3%82%b9">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p>デバッグ用のオプションを盛ったコンパイルコマンドなどはかなり長くなるので、エイリアス機能を使って短いコマンドを作っておくと便利</p>
<p>WindowsのPowerShellであれば <code>$PROFILE</code> がプロファイルのパスになっているので、</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>code $PROFILE <span style="color:#75715e"># VSCodeでプロファイルを開く</span>
</span></span></code></pre></div><p>などとして以下のようにエイリアスを定義することができる</p>
<p>この例では <code>g++debug</code> というエイリアスを定義している</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> g++debug {
</span></span><span style="display:flex;"><span>    &amp; <span style="color:#e6db74">&#39;g++.exe&#39;</span> <span style="color:#e6db74">&#39;-std=c++20&#39;</span> <span style="color:#e6db74">&#39;-D_GLIBCXX_DEBUG&#39;</span> <span style="color:#e6db74">&#39;-g&#39;</span> <span style="color:#e6db74">&#39;-O0&#39;</span> @args
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Linux/WSLであれば<code>.bashrc</code> などに以下のように記述することでエイリアスを定義できる。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>alias g++debug<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;g++ -fsanitize=undefined,address -D_GLIBCXX_DEBUG -g -O0&#39;</span>
</span></span></code></pre></div><h2 id="その他便利なオプションなど" >その他便利なオプションなど
<span>
    <a href="#%e3%81%9d%e3%81%ae%e4%bb%96%e4%be%bf%e5%88%a9%e3%81%aa%e3%82%aa%e3%83%97%e3%82%b7%e3%83%a7%e3%83%b3%e3%81%aa%e3%81%a9">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><h3 id="コンパイルオプションpragmaなど" >コンパイルオプション・pragmaなど
<span>
    <a href="#%e3%82%b3%e3%83%b3%e3%83%91%e3%82%a4%e3%83%ab%e3%82%aa%e3%83%97%e3%82%b7%e3%83%a7%e3%83%b3pragma%e3%81%aa%e3%81%a9">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><ul>
<li>
<p><code>-Wfatal-errors</code></p>
<ul>
<li>最初の1つ目のコンパイルエラーが発生した時点でコンパイルを止める</li>
</ul>
</li>
<li>
<p><code>#pragma GCC diagnostic error &quot;警告&quot;</code></p>
<ul>
<li>特定の警告をエラーにすることができる。例えば<code>#pragma GCC diagnostic error &quot;-Wshadow&quot;</code> とテンプレートの上の方に入れておけば、変数のシャドウイングをエラーにすることができ、ありがちな「入力にkがあるのに添字でもkを使ってしまった」のようなことを防止できる。</li>
<li>コンパイルオプション <code>-Werror=shadow</code> でもいいが、ソースコードに入れておくとCE扱いになるので安全</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> n, k; <span style="color:#75715e">// 入力にkがあるのに
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>cin <span style="color:#f92672">&gt;&gt;</span> n <span style="color:#f92672">&gt;&gt;</span> k;
</span></span><span style="display:flex;"><span>rep(i, n) rep(j, n) rep(k, n) { <span style="color:#75715e">// 添字としてkを使ってしまっている
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">/* 何かの処理 */</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p><code>export UBSAN_OPTIONS=&quot;print_stacktrace=1&quot;</code></p>
<ul>
<li>環境変数で指定しておくとサニタイザを指定してコンパイルしたプログラムが落ちた時にスタックトレースを表示してくれる</li>
<li><code>-g</code> オプションも併用するとスタックトレースの行数も出る</li>
<li>「未定義動作の検出」の項にあるようにWindowsのMinGWでは使えない</li>
<li>以下参照
<ul>
<li><a href="https://taotao54321.hatenablog.com/entry/2021/02/12/075342">https://taotao54321.hatenablog.com/entry/2021/02/12/075342</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="便利な文法関数" >便利な文法・関数
<span>
    <a href="#%e4%be%bf%e5%88%a9%e3%81%aa%e6%96%87%e6%b3%95%e9%96%a2%e6%95%b0">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><ul>
<li>構造化束縛・ <code>std::tie</code></li>
<li><code>std::is_sorted</code></li>
<li><code>std::static_assert</code></li>
</ul>
<h3 id="作っておくと便利な関数など" >作っておくと便利な関数など
<span>
    <a href="#%e4%bd%9c%e3%81%a3%e3%81%a6%e3%81%8a%e3%81%8f%e3%81%a8%e4%be%bf%e5%88%a9%e3%81%aa%e9%96%a2%e6%95%b0%e3%81%aa%e3%81%a9">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><ul>
<li><a href="https://www.google.com/search?q=%E5%A4%9A%E6%AC%A1%E5%85%83vector+%E3%83%9E%E3%82%AF%E3%83%AD+C%2B%2B+%E7%AB%B6%E3%83%97%E3%83%AD">多次元vectorを作るマクロ</a></li>
<li>YesNo関数：<code>string YesNo(bool cond) { return cond ? &quot;Yes&quot; : &quot;No&quot;; }</code></li>
<li>配列全部に1足したりできる <code>auto add(auto vec, ll x = 1) { for (auto&amp; e : vec) e += x; return vec; }</code></li>
<li>ACLのmodintの出力のオーバーロード <code>template &lt;int M&gt;inline ostream&amp; operator&lt;&lt;(ostream&amp; os, const static_modint&lt;M&gt;&amp; m) { return os &lt;&lt; m.val(); }</code></li>
</ul>
<h3 id="さらに些末なこと" >さらに些末なこと
<span>
    <a href="#%e3%81%95%e3%82%89%e3%81%ab%e4%ba%9b%e6%9c%ab%e3%81%aa%e3%81%93%e3%81%a8">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h3><ul>
<li>TODOマクロ。配列サイズをテスト用に小さくしたときなどでも、 <code>todo(&quot;Nを戻す&quot;);</code>などとしておくとSubmitしてもCEにしてくれる。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#ifdef ONLINE_JUDGE
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#define todo(err) static_assert(false, err)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#else
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#define todo(err)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#endif
</span></span></span></code></pre></div><ul>
<li>今はまだ使えないが、恐らく次の言語アプデで入るGCC14では <code>std::println</code> が使える。
<ul>
<li><a href="https://cpprefjp.github.io/reference/print/println.html">https://cpprefjp.github.io/reference/print/println.html</a></li>
</ul>
</li>
</ul>
<h2 id="参考" >参考
<span>
    <a href="#%e5%8f%82%e8%80%83">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p><a href="https://gcc.gnu.org/onlinedocs/gcc-6.3.0/gcc/Warning-Options.html#Warning-Options">https://gcc.gnu.org/onlinedocs/gcc-6.3.0/gcc/Warning-Options.html#Warning-Options</a></p>
<p><a href="https://aki33524.hatenablog.com/entry/2017/01/16/212526">https://aki33524.hatenablog.com/entry/2017/01/16/212526</a></p>
<p><a href="https://taotao54321.hatenablog.com/entry/2021/02/12/075342">https://taotao54321.hatenablog.com/entry/2021/02/12/075342</a></p>
<h2 id="上で言及していないが便利なリンク集" >上で言及していないが便利なリンク集
<span>
    <a href="#%e4%b8%8a%e3%81%a7%e8%a8%80%e5%8f%8a%e3%81%97%e3%81%a6%e3%81%84%e3%81%aa%e3%81%84%e3%81%8c%e4%be%bf%e5%88%a9%e3%81%aa%e3%83%aa%e3%83%b3%e3%82%af%e9%9b%86">
        <svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg>
    </a>
</span>
</h2><p><a href="https://qiita.com/TumoiYorozu/items/0ca14c65559e693f9e89">https://qiita.com/TumoiYorozu/items/0ca14c65559e693f9e89</a></p>
<p><a href="https://www.youtube.com/watch?v=uhnASau7fB4&amp;list=PLAYMgc8c_QezzZAEcnhI_Awo1QHWxE6FD&amp;index=3">https://www.youtube.com/watch?v=uhnASau7fB4&amp;list=PLAYMgc8c_QezzZAEcnhI_Awo1QHWxE6FD&amp;index=3</a></p>
<ul>
<li>オプション・環境
<ul>
<li>AtC <a href="https://atcoder.jp/contests/abc314/rules">https://atcoder.jp/contests/abc314/rules</a> （コンテストページ一番下の「ルール」）</li>
<li>CF <a href="https://codeforces.com/blog/entry/121114">https://codeforces.com/blog/entry/121114</a></li>
<li>yuki <a href="https://yukicoder.me/help/environments">https://yukicoder.me/help/environments</a></li>
<li>AOJ <a href="https://onlinejudge.u-aizu.ac.jp/system_info">https://onlinejudge.u-aizu.ac.jp/system_info</a></li>
<li>POJ <a href="http://poj.org/page?id=1000">http://poj.org/page?id=1000</a></li>
<li>HackerRank <a href="https://candidatesupport.hackerrank.com/hc/en-us/articles/4402913877523-Execution-Environment-and-Samples">https://candidatesupport.hackerrank.com/hc/en-us/articles/4402913877523-Execution-Environment-and-Samples</a></li>
<li>paiza <a href="https://paiza.jp/guide/language">https://paiza.jp/guide/language</a></li>
</ul>
</li>
</ul>
        </div>
        

    



<div class="post-info">
    
        <div class="post-date dt-published">
            <a class="u-url" href="/blog/posts/cp-cpp-tips/"><time datetime="2023-11-05">2023-11-05</time></a>
            
        </div>
    

    <a class="post-hidden-url u-url" href="https://coindarw.github.io/blog/posts/cp-cpp-tips/">https://coindarw.github.io/blog/posts/cp-cpp-tips/</a>
    <a href="https://coindarw.github.io/blog/" class="p-name p-author post-hidden-author h-card" rel="me">coindarw</a>


    <div class="post-taxonomies">
        
        
            <ul class="post-tags">
                
                    
                    <li><a href="https://coindarw.github.io/blog/tags/c&#43;&#43;/">#C&#43;&#43;</a></li>
                
                    
                    <li><a href="">#競技プログラミング</a></li>
                
            </ul>
        
        
    </div>
</div>

    </article>

    

    

    
        








    

        </main>
        
            <footer class="common-footer">
    
    

    <div class="common-footer-bottom">
        
        <div class="copyright">
            <p>© coindarw, 2024<br>
             <a target="_blank" rel="noopener noreferrer" href="https://gohugo.io/">Hugo</a>,  <a target="_blank" rel="noopener noreferrer" href="https://github.com/mitrichius/hugo-theme-anubis">Anubis</a>.<br>
            
            </p>  
        </div> 

        

    




    <button class="theme-switcher">
        
    </button>


<script>
const STORAGE_KEY = 'user-color-scheme'
const defaultTheme = "auto"

let currentTheme
let switchButton
let autoDefinedScheme = window.matchMedia('(prefers-color-scheme: dark)')

const autoChangeScheme = e => {
    currentTheme = e.matches ? 'dark' : 'light'
    document.documentElement.setAttribute('data-theme', currentTheme)
    changeButtonText()
}

document.addEventListener('DOMContentLoaded', function() {
    switchButton = document.querySelector('.theme-switcher')
    currentTheme = detectCurrentScheme()
    if (currentTheme == 'dark') {
        document.documentElement.setAttribute('data-theme', 'dark')
    }
    if (currentTheme == 'auto') {
        autoChangeScheme(autoDefinedScheme);
        autoDefinedScheme.addListener(autoChangeScheme);
    }

    if (switchButton) {
        changeButtonText()
        switchButton.addEventListener('click', switchTheme, false)
    }
  
    showContent()
})

function detectCurrentScheme() {
    if (localStorage !== null && localStorage.getItem(STORAGE_KEY)) {
        return localStorage.getItem(STORAGE_KEY)
    } 
    if (defaultTheme) {
        return defaultTheme
    } 
    if (!window.matchMedia) {
        return 'light'
    } 
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        return 'dark'
    }
    return 'light'
}

function changeButtonText()
{   
    if (switchButton) {
        switchButton.textContent = currentTheme == 'dark' ?  "" : ""
    }
}

function switchTheme(e) {
    if (currentTheme == 'dark') {
        if (localStorage !== null)
            localStorage.setItem(STORAGE_KEY, 'light')
        document.documentElement.setAttribute('data-theme', 'light')
        currentTheme = 'light'
    } else {
        if (localStorage !== null)
            localStorage.setItem(STORAGE_KEY, 'dark')
        document.documentElement.setAttribute('data-theme', 'dark')
        currentTheme = 'dark'
    }
    changeButtonText()
}

function showContent() {
    document.body.style.visibility = 'visible';
    document.body.style.opacity = 1;
}
</script>

   
    </div>

    <p class="h-card vcard">

    <a href=https://coindarw.github.io/blog/ class="p-name u-url url fn" rel="me">coindarw</a> 

    

    
</p> 
</footer>

        
    </div>
</body>
</html>
